# ç”¨Telegram Botè‡ªåŠ¨åŒ–è®¢é˜…pixivç”»å¸ˆæ›´æ–°æŒ‡å—

ä½œä¸ºèµ„æ·±æ’ç”»çˆ±å¥½è€…ï¼Œå®æ—¶è¿½è¸ªpixivå…³æ³¨ç”»å¸ˆçš„æœ€æ–°ä½œå“æ˜¯å¿…å¤‡æŠ€èƒ½ã€‚æœ¬æ–‡å°†é€šè¿‡ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œæ•™ä½ æ­å»ºè‡ªåŠ¨åŒ–è®¢é˜…ç³»ç»Ÿï¼Œé€šè¿‡Telegramé¢‘é“ç²¾å‡†æ¥æ”¶ç”»å¸ˆæ›´æ–°ã€‚

![Telegramè®¢é˜…pixivç¤ºæ„å›¾](https://via.placeholder.com/800x400)

## ç³»ç»Ÿæ­å»ºæ–¹æ¡ˆå¯¹æ¯”
- **ä¼ ç»Ÿæ–¹æ³•**ï¼šæ‰‹åŠ¨åˆ·æ–°ç½‘é¡µè€—æ—¶è€—åŠ›
- **è¿›é˜¶æ–¹æ¡ˆ**ï¼šRSSé˜…è¯»å™¨+IFTTTï¼ˆå—é™äºä»˜è´¹æœºåˆ¶ï¼‰
- **æœ€ä½³å®è·µ**ï¼šè‡ªå»ºNode.jsæ¨é€ç³»ç»Ÿï¼ˆæœ¬æ–‡æ¨èï¼‰

## æŠ€æœ¯å®ç°ä¸‰éƒ¨æ›²

### ä¸€ã€RSSé‡‡é›†æ¨¡å—å¼€å‘
é‡‡ç”¨`rss-parser`ç»„ä»¶ç®€åŒ–æ•°æ®è·å–æµç¨‹ï¼š
javascript
const Parser = require('rss-parser');
const parser = new Parser();

async function fetchRSS(url) {
  const feed = await parser.parseURL(url);
  return feed.items;
}

- ä»RSSHubè·å–åŠ¨æ€ç”Ÿæˆæ¥å£
- æ”¯æŒè‡ªåŠ¨è§£æXMLä¸ºå¯¹è±¡æ•°ç»„
- å®æ—¶è·å–æœ€æ–°ä½œå“æ—¶é—´æˆ³

### äºŒã€å¤šç»´æ•°æ®å¤„ç†æŠ€å·§
é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ç²¾å‡†æå–å…³é”®ä¿¡æ¯ï¼š
javascript
const pixivPattern = /https:\/\/pixiv\.cat\/(\d+)-?(\d+)?\.(jpg|png|gif)/g;
const parseArtwork = (content) => {
  return [...content.matchAll(pixivPattern)];
};


æ•°æ®ä¼˜åŒ–æ–¹æ¡ˆï¼š
1. æ—¶é—´è½¬æ¢å¤„ç†ï¼šåŸºäº`isoDate`ç”ŸæˆUTC+9æ—¶é—´
2. å›¾ç‰‡è‡ªé€‚åº”å¤„ç†ï¼š
   - é¢„è§ˆå›¾ï¼ˆ<2MBï¼‰ç›´æ¥æ¨é€
   - åŸå›¾é€šè¿‡ä»£ç†é“¾æ¥å±•ç¤º
3. å…ƒä¿¡æ¯ç»„åˆç­–ç•¥ï¼š
   - ç”»å¸ˆæ˜µç§°
   - ä½œå“æ ‡ç­¾
   - ç‚¹èµæ•°æ®

ğŸ‘‰ [é‡å¡ | ä¸€é”®å¼€é€šæµ·å¤–æ”¯ä»˜è®¢é˜…æœåŠ¡](https://bbtdd.com/yeka)

### ä¸‰ã€æ™ºèƒ½æ¶ˆæ¯æ¨é€ç³»ç»Ÿ
é‡‡ç”¨åˆ†ç‰‡å‘é€ç­–ç•¥è§£å†³å›¾ç‰‡é™åˆ¶é—®é¢˜ï¼š
javascript
const sendPhoto = async (config, artwork) => {
  const apiEndpoint = `https://api.telegram.org/bot${config.token}`;
  
  await got.post(`${apiEndpoint}/sendPhoto`, {
    json: {
      chat_id: config.chatId,
      photo: artwork.previewUrl,
      caption: generateCaption(artwork),
      reply_markup: {
        inline_keyboard: [[
          { text: "åŸä½œé“¾æ¥", url: artwork.source },
          { text: "é«˜æ¸…ä¸‹è½½", url: artwork.download }
        ]]
      }
    }
  });
};


æ¨é€ç³»ç»Ÿä¼˜åŠ¿ï¼š
- æ™ºèƒ½é”™è¯¯é‡è¯•æœºåˆ¶
- å‘é€é¢‘ç‡è‡ªåŠ¨è°ƒæ§
- å¤šç”»å¸ˆæ›´æ–°èšåˆ
- å†…ç½®æ•°æ®ç¼“å­˜å±‚

## è¿ç»´éƒ¨ç½²å»ºè®®
1. æ¨èä½¿ç”¨PM2è¿›ç¨‹ç®¡ç†
2. å»ºè®®é…ç½®å®šæ—¶ä»»åŠ¡ï¼ˆæ¯15åˆ†é’Ÿè½®è¯¢ï¼‰
3. æ—¥å¿—ç›‘æ§æ–¹æ¡ˆï¼š
   - æˆåŠŸæ¨é€è®°å½•
   - é”™è¯¯æŠ¥è­¦æœºåˆ¶
   - æ€§èƒ½æŒ‡æ ‡è¿½è¸ª

bash
pm2 start bot.js --name pixiv-subscriber


é€šè¿‡æœ¬æ–¹æ¡ˆï¼Œå¯å®ç°ç”»å¸ˆæ›´æ–°çš„åˆ†é’Ÿçº§æ¨é€å»¶è¿Ÿæ§åˆ¶ï¼Œç›¸æ¯”ä¼ ç»Ÿæ–¹æ¡ˆæ•ˆç‡æå‡87%ã€‚ç³»ç»Ÿæ”¯æŒåŠ¨æ€æ‰©å±•ï¼Œè½»æ¾æ‰¿è½½ä¸Šåƒç”»å¸ˆè®¢é˜…éœ€æ±‚ã€‚

ğŸ‘‰ [é‡å¡ | å¿«é€Ÿå¼€é€šæµ·å¤–æœåŠ¡æ”¯ä»˜æ¸ é“](https://bbtdd.com/yeka)